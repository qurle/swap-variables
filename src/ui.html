<!-- interface -->
<script>
    onmessage = async (event) => {
        fetch('https://example.com/api/send.php',
            {
                method: 'POST',
                body: JSON.stringify({
                    k: event.data.pluginMessage.k,
                    v: event.data.pluginMessage.v
                })
            })
            .then(response => {
                console.log(JSON.stringify(response))
                if (event.data.pluginMessage.last)
                    parent.postMessage({ pluginMessage: "finished" }, '*')
            }).catch((e) => {
                console.error(e)
                parent.postMessage({ pluginMessage: "finished" }, '*')
            })
    }
</script>